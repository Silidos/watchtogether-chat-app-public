{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ravul\\\\Desktop\\\\chatApp\\\\react-firebase-authentication\\\\src\\\\components\\\\Admin\\\\index.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport { SignUpLink } from '../SignUp';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport { positions } from '@material-ui/system';\nimport { AuthUserContext } from '../Session';\nimport PlayerControlExample from '../Player';\nimport './Message.css';\n\nconst Admin = () => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20\n  },\n  __self: this\n}, authUser => authUser ? React.createElement(AdminBase, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 22\n  },\n  __self: this\n}) : React.createElement(AdminBase, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 22\n  },\n  __self: this\n}));\n\nconst NonAuthAdminBase = () => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 27\n  },\n  __self: this\n}, \"No account\");\n\nclass AdminBase2 extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleNameChange = e => this.setState({\n      nickname: e.target.value\n    });\n\n    this.handleEmailChange = e => this.setState({\n      email: e.target.value\n    });\n\n    this.handleClick = e => {\n      // register the nickname\n      this.props.firebase.db.ref().child('nicknames').push({\n        nickname: this.state.nickname,\n        email: this.state.email\n      });\n      this.setState({\n        joined: true\n      });\n    };\n\n    this.onSubmit = event => {\n      var ref = this.props.firebase.db.ref().child('chatrooms').child('global');\n      console.log(\"hello button\");\n      ref.remove();\n      event.preventDefault();\n      this.setState({\n        messages: {}\n      });\n    };\n\n    this.handleMsgChange = e => this.setState({\n      msg: e.target.value\n    });\n\n    this.handleKeyDown = e => {\n      if (e.key === \"Enter\") {\n        // send the msg\n        this.chatRoom.push({\n          sender: this.state.nickname,\n          msg: this.state.msg\n        }); // clear the field\n\n        this.setState({\n          msg: \"\"\n        });\n      }\n    };\n\n    this.state = {\n      joined: false,\n      nickname: \"\",\n      email: \"\",\n      msg: \"\",\n      messages: {}\n    };\n    this.chatRoom = this.props.firebase.db.ref().child('chatrooms').child('global');\n\n    this.handleNewMessages = snap => {\n      console.log(snap.val()); // if not null then update state\n\n      if (snap.val()) this.setState({\n        messages: snap.val()\n      });\n    };\n  }\n\n  componentDidMount() {\n    // subscribe\n    this.chatRoom.on('value', this.handleNewMessages);\n  }\n\n  componentWillUnmount() {\n    // unsubscribe\n    this.chatRoom.off('value', this.handleNewMessages);\n  }\n\n  render() {\n    return React.createElement(AuthUserContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, authUser => React.createElement(\"div\", {\n      className: \"messenger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, !this.state.joined ? // <Container maxWidth=\"sm\">\n    // <div className=\"joinForm\">\n    //   <input placeholder=\"Nickname\" value={this.state.nickname} onChange={this.handleNameChange} /><br />\n    //   <input placeholder=\"Email\" value={this.state.email} onChange={this.handleEmailChange} /><br />\n    //   <button onClick={this.handleClick}>Join</button>\n    // </div>\n    // </Container>\n    React.createElement(\"div\", {\n      className: \"messenger2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"left-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"header2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(PlayerControlExample, {\n      fluid: \"false\",\n      height: \"1200\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(Typography, {\n      color: \"textPrimary\",\n      variant: \"h1\",\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Choose your chatroom\"), React.createElement(\"div\", {\n      className: \"joinForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"text\",\n      color: \"inherit\",\n      size: \"small\",\n      className: \"toolbarbutton\",\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      color: \"textPrimary\",\n      className: \"toolbartext\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Global Chat\")))))) : (this.state.nickname = authUser.email, React.createElement(\"div\", {\n      className: \"messenger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"player\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"scrollable sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"toolbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"left-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"text\",\n      color: \"inherit\",\n      size: \"small\",\n      className: \"toolbarbutton\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      color: \"textPrimary\",\n      className: \"toolbartext\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Clear Chat\")))), React.createElement(Container, {\n      maxWidth: \"sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, Object.keys(this.state.messages).map(message => {\n      // Check if the msg is from the user\n      if (this.state.messages[message][\"sender\"] === this.state.nickname) return React.createElement(\"div\", {\n        className: \"message4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, this.state.messages[message][\"sender\"], \" :\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), this.state.messages[message][\"msg\"]);else return React.createElement(\"div\", {\n        className: \"message2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"sender\",\n        className: \"message .bubble-container .bubble\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, this.state.messages[message][\"sender\"], \" :\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), this.state.messages[message][\"msg\"]);\n    })), React.createElement(\"div\", {\n      className: \"compose\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"compose-input\",\n      placeholder: \"Type a message, @name\",\n      onChange: this.handleMsgChange,\n      onKeyDown: this.handleKeyDown,\n      value: this.state.msg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }))), \" \")))));\n  }\n\n}\n\nconst AdminBase = compose(withFirebase)(AdminBase2);\nexport default AdminBase;","map":{"version":3,"sources":["C:/Users/Ravul/Desktop/chatApp/react-firebase-authentication/src/components/Admin/index.js"],"names":["React","Component","Link","withRouter","compose","SignUpLink","withFirebase","ROUTES","Button","TextField","CssBaseline","Typography","Container","Box","positions","AuthUserContext","PlayerControlExample","Admin","authUser","NonAuthAdminBase","AdminBase2","constructor","props","handleNameChange","e","setState","nickname","target","value","handleEmailChange","email","handleClick","firebase","db","ref","child","push","state","joined","onSubmit","event","console","log","remove","preventDefault","messages","handleMsgChange","msg","handleKeyDown","key","chatRoom","sender","handleNewMessages","snap","val","componentDidMount","on","componentWillUnmount","off","render","Object","keys","map","message","AdminBase"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { compose } from 'recompose';\r\nimport { SignUpLink } from '../SignUp';\r\nimport { withFirebase } from '../Firebase';\r\nimport * as ROUTES from '../../constants/routes';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\nimport { positions } from '@material-ui/system';\r\nimport { AuthUserContext } from '../Session';\r\nimport PlayerControlExample from '../Player';\r\nimport './Message.css';\r\n\r\nconst Admin = () => (\r\n  <div>\r\n      {authUser =>\r\n       authUser ? <AdminBase /> : <AdminBase />\r\n      }\r\n </div>\r\n)\r\nconst NonAuthAdminBase = () => (\r\n  <div>\r\n    No account\r\n  </div>\r\n)\r\n\r\nclass AdminBase2 extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      joined: false,\r\n      nickname: \"\",\r\n      email: \"\",\r\n      msg: \"\",\r\n      messages: {},\r\n    };\r\n\r\n  this.chatRoom = this.props.firebase.db.ref().child('chatrooms').child('global');\r\n    this.handleNewMessages = snap => {\r\n      console.log(snap.val());\r\n      // if not null then update state\r\n      if (snap.val()) this.setState({ messages: snap.val() });\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    // subscribe\r\n    this.chatRoom.on('value', this.handleNewMessages);\r\n  }\r\n  componentWillUnmount() {\r\n    // unsubscribe\r\n    this.chatRoom.off('value', this.handleNewMessages);\r\n  }\r\n  handleNameChange = e => this.setState({ nickname: e.target.value });\r\n  handleEmailChange = e => this.setState({ email: e.target.value });\r\n  handleClick = e => {\r\n    // register the nickname\r\n    this.props.firebase.db.ref().child('nicknames').push({\r\n      nickname: this.state.nickname,\r\n      email: this.state.email,\r\n    });\r\n    \r\n    this.setState({ joined: true });\r\n    \r\n  };\r\n\r\n  onSubmit = event => \r\n{\r\n  var ref = this.props.firebase.db.ref().child('chatrooms').child('global');\r\n  console.log(\"hello button\");\r\n  ref.remove();\r\n  event.preventDefault();\r\n  this.setState({ messages: {} })\r\n}\r\n\r\n  handleMsgChange = e => this.setState({ msg: e.target.value });\r\n  handleKeyDown = e => {\r\n    if (e.key === \"Enter\") {\r\n      // send the msg\r\n      this.chatRoom.push({\r\n        sender: this.state.nickname,\r\n        msg: this.state.msg,\r\n      });\r\n      // clear the field\r\n      this.setState({ msg: \"\" });\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <AuthUserContext.Consumer>\r\n        \r\n        {authUser => ( \r\n        <div className=\"messenger\" >\r\n        {!this.state.joined ? (\r\n          // <Container maxWidth=\"sm\">\r\n          // <div className=\"joinForm\">\r\n          //   <input placeholder=\"Nickname\" value={this.state.nickname} onChange={this.handleNameChange} /><br />\r\n          //   <input placeholder=\"Email\" value={this.state.email} onChange={this.handleEmailChange} /><br />\r\n          //   <button onClick={this.handleClick}>Join</button>\r\n\r\n          // </div>\r\n          // </Container>\r\n          <div className= \"messenger2\" >\r\n          <div className= \"header2\">\r\n            <div className=\"left-items\"></div>\r\n            <div className= \"header2\">\r\n            <PlayerControlExample fluid = \"false\" height= \"1200\"></PlayerControlExample>\r\n              <Typography color=\"textPrimary\" variant=\"h1\" align = 'center'>\r\n            Choose your chatroom\r\n          </Typography>\r\n          <div className=\"joinForm\">\r\n            <Button variant=\"text\" color=\"inherit\" size=\"small\" className= \"toolbarbutton\" onClick={this.handleClick}  >\r\n    <Typography color=\"textPrimary\" className= \"toolbartext\">\r\n            Global Chat \r\n          </Typography>\r\n          </Button>\r\n          </div>\r\n          </div>\r\n          </div>\r\n          </div>\r\n        ) : (\r\n          this.state.nickname = authUser.email,\r\n          <div className=\"messenger\" >\r\n            <div className=\"player\">\r\n              </div>\r\n            <div className=\"scrollable sidebar\">\r\n               <div className=\"toolbar\" >\r\n               <div className=\"left-items\"></div>\r\n               <form onSubmit={this.onSubmit}>\r\n               <Button variant=\"text\" color=\"inherit\" size=\"small\" className= \"toolbarbutton\"type=\"submit\"  >\r\n    <Typography color=\"textPrimary\" className= \"toolbartext\">\r\n            Clear Chat\r\n          </Typography>\r\n          </Button>\r\n          </form>\r\n               </div>\r\n              <Container maxWidth=\"sm\">\r\n              <div className=\"message\">\r\n                {Object.keys(this.state.messages).map(message => {\r\n                  // Check if the msg is from the user\r\n                  if (this.state.messages[message][\"sender\"] === this.state.nickname)\r\n                    return (\r\n                      <div className=\"message4\">\r\n                        <span id=\"me\">{this.state.messages[message][\"sender\"]} :</span><br />\r\n                        {this.state.messages[message][\"msg\"]}\r\n                      </div>\r\n                    );\r\n                  else\r\n                    return (\r\n                      <div className=\"message2\">\r\n                        <span id=\"sender\" className= \"message .bubble-container .bubble\">{this.state.messages[message][\"sender\"]} :</span><br />\r\n                        {this.state.messages[message][\"msg\"]}\r\n                      </div>\r\n                    );\r\n                })}\r\n                   </div>\r\n              \r\n              <div className = \"compose\">\r\n              <input className=\"compose-input\" placeholder=\"Type a message, @name\" onChange={this.handleMsgChange} onKeyDown={this.handleKeyDown} value={this.state.msg} /><br />\r\n              </div>\r\n              \r\n              </Container> </div>\r\n                </div>\r\n          )}\r\n      </div>\r\n        )}\r\n      </AuthUserContext.Consumer>\r\n      \r\n    );\r\n  }\r\n}\r\nconst AdminBase = compose(\r\n  withFirebase,\r\n)(AdminBase2);\r\nexport default AdminBase;"]},"metadata":{},"sourceType":"module"}