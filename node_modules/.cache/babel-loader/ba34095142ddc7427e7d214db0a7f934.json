{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ravul\\\\Desktop\\\\chatApp\\\\react-firebase-authentication\\\\src\\\\components\\\\Admin\\\\index.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport { SignUpLink } from '../SignUp';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\nimport { positions } from '@material-ui/system';\nimport { AuthUserContext } from '../Session';\n\nconst Admin = () => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18\n  },\n  __self: this\n}, authUser => authUser ? React.createElement(AdminBase, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20\n  },\n  __self: this\n}) : React.createElement(AdminBase, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20\n  },\n  __self: this\n}));\n\nconst NonAuthAdminBase = () => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 25\n  },\n  __self: this\n}, \"No account\");\n\nclass AdminBase2 extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleNameChange = e => this.setState({\n      nickname: e.target.value\n    });\n\n    this.handleEmailChange = e => this.setState({\n      email: e.target.value\n    });\n\n    this.handleClick = e => {\n      // register the nickname\n      this.props.firebase.db.ref().child('nicknames').push({\n        nickname: this.state.nickname,\n        email: this.state.email\n      });\n      this.setState({\n        joined: true\n      });\n    };\n\n    this.handleMsgChange = e => this.setState({\n      msg: e.target.value\n    });\n\n    this.handleKeyDown = e => {\n      if (e.key === \"Enter\") {\n        // send the msg\n        this.chatRoom.push({\n          sender: this.state.nickname,\n          msg: this.state.msg\n        }); // clear the field\n\n        this.setState({\n          msg: \"\"\n        });\n      }\n    };\n\n    this.state = {\n      joined: true,\n      nickname: \"\",\n      email: \"\",\n      msg: \"\",\n      messages: {}\n    };\n    this.chatRoom = this.props.firebase.db.ref().child('chatrooms').child('global');\n\n    this.handleNewMessages = snap => {\n      console.log(snap.val()); // if not null then update state\n\n      if (snap.val()) this.setState({\n        messages: snap.val()\n      });\n    };\n  }\n\n  componentDidMount() {\n    // subscribe\n    this.chatRoom.on('value', this.handleNewMessages);\n  }\n\n  componentWillUnmount() {\n    // unsubscribe\n    this.chatRoom.off('value', this.handleNewMessages);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, !this.state.joined ? React.createElement(\"div\", {\n      className: \"joinForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \"Nickname\",\n      value: this.state.nickname,\n      onChange: this.handleNameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      placeholder: \"Email\",\n      value: this.state.email,\n      onChange: this.handleEmailChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Join\")) : React.createElement(\"div\", {\n      className: \"chat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"messages\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, Object.keys(this.state.messages).map(message => {\n      // Check if the msg is from the user\n      if (this.state.messages[message][\"sender\"] === this.state.nickname) return React.createElement(\"div\", {\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, this.state.messages[message][\"sender\"], \" :\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), this.state.messages[message][\"msg\"]);else return React.createElement(\"div\", {\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"sender\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, this.state.messages[message][\"sender\"], \" :\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), this.state.messages[message][\"msg\"]);\n    })), React.createElement(\"input\", {\n      placeholder: \"msg\",\n      onChange: this.handleMsgChange,\n      onKeyDown: this.handleKeyDown,\n      value: this.state.msg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    })));\n  }\n\n}\n\nconst AdminBase = compose(withFirebase)(AdminBase2);\nexport default Admin;","map":{"version":3,"sources":["C:/Users/Ravul/Desktop/chatApp/react-firebase-authentication/src/components/Admin/index.js"],"names":["React","Component","Link","withRouter","compose","SignUpLink","withFirebase","ROUTES","Button","TextField","CssBaseline","Typography","Container","Box","positions","AuthUserContext","Admin","authUser","NonAuthAdminBase","AdminBase2","constructor","props","handleNameChange","e","setState","nickname","target","value","handleEmailChange","email","handleClick","firebase","db","ref","child","push","state","joined","handleMsgChange","msg","handleKeyDown","key","chatRoom","sender","messages","handleNewMessages","snap","console","log","val","componentDidMount","on","componentWillUnmount","off","render","Object","keys","map","message","AdminBase"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { compose } from 'recompose';\r\nimport { SignUpLink } from '../SignUp';\r\nimport { withFirebase } from '../Firebase';\r\nimport * as ROUTES from '../../constants/routes';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\nimport { positions } from '@material-ui/system';\r\nimport { AuthUserContext } from '../Session';\r\n\r\nconst Admin = () => (\r\n  <div>\r\n      {authUser =>\r\n       authUser ? <AdminBase /> : <AdminBase />\r\n      }\r\n </div>\r\n)\r\nconst NonAuthAdminBase = () => (\r\n  <div>\r\n    No account\r\n  </div>\r\n)\r\nclass AdminBase2 extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      joined: true,\r\n      nickname: \"\",\r\n      email: \"\",\r\n      msg: \"\",\r\n      messages: {},\r\n    };\r\n\r\n  this.chatRoom = this.props.firebase.db.ref().child('chatrooms').child('global');\r\n    this.handleNewMessages = snap => {\r\n      console.log(snap.val());\r\n      // if not null then update state\r\n      if (snap.val()) this.setState({ messages: snap.val() });\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    // subscribe\r\n    this.chatRoom.on('value', this.handleNewMessages);\r\n  }\r\n  componentWillUnmount() {\r\n    // unsubscribe\r\n    this.chatRoom.off('value', this.handleNewMessages);\r\n  }\r\n  handleNameChange = e => this.setState({ nickname: e.target.value });\r\n  handleEmailChange = e => this.setState({ email: e.target.value });\r\n  handleClick = e => {\r\n    // register the nickname\r\n    this.props.firebase.db.ref().child('nicknames').push({\r\n      nickname: this.state.nickname,\r\n      email: this.state.email,\r\n    });\r\n    \r\n    this.setState({ joined: true });\r\n    \r\n  };\r\n\r\n  handleMsgChange = e => this.setState({ msg: e.target.value });\r\n  handleKeyDown = e => {\r\n    if (e.key === \"Enter\") {\r\n      // send the msg\r\n      this.chatRoom.push({\r\n        sender: this.state.nickname,\r\n        msg: this.state.msg,\r\n      });\r\n      // clear the field\r\n      this.setState({ msg: \"\" });\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        {!this.state.joined ? (\r\n          <div className=\"joinForm\">\r\n            <input placeholder=\"Nickname\" value={this.state.nickname} onChange={this.handleNameChange} /><br />\r\n            <input placeholder=\"Email\" value={this.state.email} onChange={this.handleEmailChange} /><br />\r\n            <button onClick={this.handleClick}>Join</button>\r\n          </div>\r\n        ) : (\r\n            <div className=\"chat\">\r\n              <div className=\"messages\">\r\n                {Object.keys(this.state.messages).map(message => {\r\n                  // Check if the msg is from the user\r\n                  if (this.state.messages[message][\"sender\"] === this.state.nickname)\r\n                    return (\r\n                      <div className=\"message\">\r\n                        <span id=\"me\">{this.state.messages[message][\"sender\"]} :</span><br />\r\n                        {this.state.messages[message][\"msg\"]}\r\n                      </div>\r\n                    );\r\n                  else\r\n                    return (\r\n                      <div className=\"message\">\r\n                        <span id=\"sender\">{this.state.messages[message][\"sender\"]} :</span><br />\r\n                        {this.state.messages[message][\"msg\"]}\r\n                      </div>\r\n                    );\r\n                })}\r\n              </div>\r\n              <input placeholder=\"msg\" onChange={this.handleMsgChange} onKeyDown={this.handleKeyDown} value={this.state.msg} /><br />\r\n            </div>\r\n          )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst AdminBase = compose(\r\n  withFirebase,\r\n)(AdminBase2);\r\nexport default Admin;"]},"metadata":{},"sourceType":"module"}